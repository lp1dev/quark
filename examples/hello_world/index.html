<!DOCTYPE html>
<html>

<head>
  <title>Quark Hello World</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <div id="container">
    <h1 id="title">Hello, World</h1>
    <p id="outputarea">Hello from Quark!</p>
    <p id="keypressed">No key pressed.</p>
    <button id="button" onclick="counterup()">Here's a button!</button>
  </div>

  <script type="text/javascript">
    var counter = 0

    function counterup() {
      var text = document.getElementById("outputarea")
      console.log("Button clicked!")
      counter += 1
      text.innerText = "You have clicked the button " + counter + " time(s)!"
    }

   document.addEventListener("keydown", function(event) {
      var keypressed = document.getElementById("keypressed")
      keypressed.innerText = "Key pressed " + event.code
   })
  
   document.addEventListener("gamepadconnected", function(event) {
    console.log("GAMEPAD CONNECTED")
    navigator.getGamepads()

   })
   

    // function initGamepad() {
    //   var gamepad = navigator.getGamepads()[0] // Default console controller

    //   // for (var i = 0; i < mapping.length; i++) {
    //   //   if (gamepad.buttons[i].pressed) {
    //   //     console.log(mapping[i], "pressed")
    //   //     document.getElementById("keypressed").innerText = mapping[i] + " pressed!!"
    //   //   }
    //   // }
    // }

    document.addEventListener('keydown', function(event) {
      console.log("Key pressed ", event)
      document.getElementById('keypressed').innerText = "Keyboard key pressed " + event.code
    })

    var mapping = [ 
        "X", 
        "CIRCLE", 
        "TRIANGLE",
        "SQUARE",
        "SHARE",
        "PS",
        "OPTIONS",
        "LEFTSTICK",
        "RIGHTSTICK",
        "LEFTSHOULDER",
        "RIGHTSHOULDER",
        "DPAD_UP",
        "DPAD_DOWN",
        "DPAD_LEFT",
        "DPAD_RIGHT",
      ] // Only implemented the first 15 buttons
        // TODO : Add the rest



    document.addEventListener('button_press', function(event) {
      console.log("Button press", event)
      document.getElementById('keypressed').innerText = mapping[event.code] + " pressed on the gamepad"
      
    })

  </script>

</body>

</html>
